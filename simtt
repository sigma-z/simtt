#!/usr/bin/env php
<?php
declare(strict_types=1);

/**
 * @author Steffen Zeidler <sigma_z@sigma-scripts.de>
 */
require __DIR__ . '/vendor/autoload.php';
require __DIR__ . '/src/bootstrap.php';

use Symfony\Component\Console\Application;

define('SIMTT_VERSION', '1.0.0');

echo 'Simtt: the simple interactive time tracker in PHP by Steffen Zeidler' . "\n";

$simttInteractive = ($_SERVER['argv'][1] ?? null) === '-i';

$application = new Application('Simtt', SIMTT_VERSION);
if ($simttInteractive) {
    unset($_SERVER['argv'][1]);
    /** @noinspection PhpUnhandledExceptionInspection */
    $application->add($containerBuilder->get('simtt.cmd'));
    $application->setDefaultCommand('Simtt');
}

/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('start.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('stop.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('status.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('task.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('comment.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('log.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('day.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('yesterday.cmd'));
/** @noinspection PhpUnhandledExceptionInspection */
$application->add($containerBuilder->get('now.cmd'));
$application->run();
